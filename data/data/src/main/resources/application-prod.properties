# Production environment configuration

# Server configuration
server.port=8181
server.address=0.0.0.0

# Database configuration
spring.datasource.url=${DB_URL:jdbc:mysql://localhost:3306/car_db}
spring.datasource.username=${DB_USERNAME:root}
# Use environment variable for password in production
spring.datasource.password=${DB_PASSWORD:Sindoor@25}

# Connection pool settings
spring.datasource.hikari.connection-timeout=20000
#spring.datasource.hikari.maximum-pool-size=${DB_MAX_POOL_SIZE:10}
#spring.datasource.hikari.minimum-idle=${DB_MIN_IDLE:5}
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000

# Disable detailed error messages to prevent leaking sensitive information
server.error.include-stacktrace=never
server.error.include-message=never

# Set production-level logging
logging.level.org.hibernate.SQL=WARN
logging.level.org.springframework.web=WARN

# Optimize Hibernate for production
#spring.jpa.properties.hibernate.jdbc.batch_size=20
#spring.jpa.properties.hibernate.order_inserts=true

# File upload settings
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=5MB

# Add these properties to improve transaction handling
spring.datasource.hikari.maximum-pool-size=15
spring.datasource.hikari.minimum-idle=5
# Increase transaction timeout
spring.transaction.default-timeout=30
#logging.level.org.hibernate=DEBUG
#logging.level.org.springframework.transaction=DEBUG